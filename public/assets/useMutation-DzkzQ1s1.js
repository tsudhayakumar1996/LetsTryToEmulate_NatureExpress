var I=s=>{throw TypeError(s)};var y=(s,t,e)=>t.has(s)||I("Cannot "+e);var r=(s,t,e)=>(y(s,t,"read from private field"),e?e.call(s):t.get(s)),p=(s,t,e)=>t.has(s)?I("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),m=(s,t,e,o)=>(y(s,t,"write to private field"),o?o.call(s,e):t.set(s,e),e),E=(s,t,e)=>(y(s,t,"access private method"),e);import{j as G,B as x,r as O}from"./index-DpFFfK3A.js";import{q as L}from"./proxy-B3GmCGVc.js";import{S as j,w as F,q as R,C as D,b as C,A as K,B as k,z as J}from"./utils-DR6xRC4D.js";const X=({children:s})=>G.jsx(x,{component:L.div,initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:s}),Y="/auth/register",Z="/auth/passwordReset",tt="/auth/completeRegister",st="/auth/passwordConfirm",et="/auth/me",rt="/auth/login/google",U="GET",$="POST",ot="Login",it="Register",at="Forgot password",nt="Complete register",ht="Confirm password",q="jwtToken",ut=(s,t)=>localStorage.setItem(s,t),B=s=>localStorage.getItem(s),A="http://localhost:4001",v=async s=>{const t=await s.json();if(s.ok)return t;throw new Error(t.message)},N=s=>{let t="An unknown error occurred";return s instanceof Error&&(t=s.message),new Error(JSON.stringify({message:t}))},M=()=>({"Content-Type":"application/json",Authorization:`Bearer ${B(q)??""}`}),ct=async({endUrl:s})=>{try{const t=await fetch(`${A}${s}`,{method:U,headers:M(),credentials:"include"});return await v(t)}catch(t){throw N(t)}},lt=async({endUrl:s,reqObj:t})=>{try{const e=await fetch(`${A}${s}`,{method:$,headers:M(),body:JSON.stringify(t),credentials:"include"});return await v(e)}catch(e){throw N(e)}};var u,c,i,a,n,f,_,P,H=(P=class extends j{constructor(t,e){super();p(this,n);p(this,u);p(this,c);p(this,i);p(this,a);m(this,u,t),this.setOptions(e),this.bindMethods(),E(this,n,f).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var o;const e=this.options;this.options=r(this,u).defaultMutationOptions(t),F(this.options,e)||r(this,u).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,i),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&R(e.mutationKey)!==R(this.options.mutationKey)?this.reset():((o=r(this,i))==null?void 0:o.state.status)==="pending"&&r(this,i).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,i))==null||t.removeObserver(this)}onMutationUpdate(t){E(this,n,f).call(this),E(this,n,_).call(this,t)}getCurrentResult(){return r(this,c)}reset(){var t;(t=r(this,i))==null||t.removeObserver(this),m(this,i,void 0),E(this,n,f).call(this),E(this,n,_).call(this)}mutate(t,e){var o;return m(this,a,e),(o=r(this,i))==null||o.removeObserver(this),m(this,i,r(this,u).getMutationCache().build(r(this,u),this.options)),r(this,i).addObserver(this),r(this,i).execute(t)}},u=new WeakMap,c=new WeakMap,i=new WeakMap,a=new WeakMap,n=new WeakSet,f=function(){var e;const t=((e=r(this,i))==null?void 0:e.state)??D();m(this,c,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},_=function(t){C.batch(()=>{var e,o,h,g,l,b,T,w;if(r(this,a)&&this.hasListeners()){const d=r(this,c).variables,S=r(this,c).context;(t==null?void 0:t.type)==="success"?((o=(e=r(this,a)).onSuccess)==null||o.call(e,t.data,d,S),(g=(h=r(this,a)).onSettled)==null||g.call(h,t.data,null,d,S)):(t==null?void 0:t.type)==="error"&&((b=(l=r(this,a)).onError)==null||b.call(l,t.error,d,S),(w=(T=r(this,a)).onSettled)==null||w.call(T,void 0,t.error,d,S))}this.listeners.forEach(d=>{d(r(this,c))})})},P);function dt(s,t){const e=K(),[o]=O.useState(()=>new H(e,s));O.useEffect(()=>{o.setOptions(s)},[o,s]);const h=O.useSyncExternalStore(O.useCallback(l=>o.subscribe(C.batchCalls(l)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),g=O.useCallback((l,b)=>{o.mutate(l,b).catch(k)},[o]);if(h.error&&J(o.options.throwOnError,[h.error]))throw h.error;return{...h,mutate:g,mutateAsync:h.mutate}}export{X as A,nt as C,at as F,rt as G,q as J,ot as L,ht as P,it as R,et as a,Y as b,Z as c,tt as d,st as e,ct as g,lt as p,ut as s,dt as u};
